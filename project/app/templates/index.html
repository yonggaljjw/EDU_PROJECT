<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì§„ë¡œ ì„¤ê³„ - ë©”ì¸í˜ì´ì§€</title>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Pretendard', sans-serif;
    }

    body {
      background: linear-gradient(135deg, #e0f7fa, #e1bee7);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
  padding: 20px 60px;
  background: linear-gradient(135deg, #7e57c2, #5c6bc0);
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: sticky;
  top: 0;
  z-index: 1000;
}

.logo {
  font-size: 2rem;
  font-weight: bold;
  color: white;
  letter-spacing: 1px;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
}

nav a {
  margin-left: 30px;
  text-decoration: none;
  color: white;
  font-size: 1.1rem;
  position: relative;
  padding-bottom: 5px;
  transition: all 0.3s;
}

nav a::after {
  content: '';
  position: absolute;
  width: 0%;
  height: 2px;
  bottom: 0;
  left: 0;
  background-color: white;
  transition: all 0.3s ease-in-out;
}

nav a:hover {
  color: #ffe082;
}

nav a:hover::after {
  width: 100%;
}

    .hero {
      text-align: center;
      padding: 60px 20px;
    }

    .hero h1 {
      font-size: 3rem;
      color: #4a148c;
      margin-bottom: 20px;
    }

    .hero p {
      font-size: 1.2rem;
      color: #555;
      max-width: 700px;
      margin: 0 auto 40px;
    }

    .hero .cta-button {
      padding: 15px 30px;
      background-color: #7e57c2;
      color: white;
      font-size: 1.1rem;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .hero .cta-button:hover {
      background-color: #5e35b1;
    }

    .content-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 40px;
      padding-bottom: 60px;
    }

    .info-card {
      background-color: #ffffffdd;
      padding: 30px 40px;
      border-radius: 15px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
      max-width: 800px;
      width: 90%;
      text-align: left;
    }

    .info-card h3 {
      font-size: 1.5rem;
      color: #512da8;
      margin-bottom: 15px;
    }

    .info-card p, .info-card li {
      font-size: 1.1rem;
      color: #444;
      line-height: 1.7;
    }

    .salary {
      font-weight: bold;
      font-size: 1.15rem;
      color: #2e7d32;
      margin-top: 15px;
    }

    footer {
      padding: 20px;
      text-align: center;
      background-color: #f3e5f5;
      color: #666;
      font-size: 0.9rem;
    }

    @media (max-width: 768px) {
      .hero h1 {
        font-size: 2rem;
      }

      .info-card {
        padding: 20px;
      }

      .info-card h3 {
        font-size: 1.3rem;
      }

      .info-card p {
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>
  {% include "_navbar.html" %}

  <section class="hero">
    <h1>ë‚˜ì—ê²Œ ê¼­ ë§ëŠ” ì§„ë¡œì™€ í•™ê³¼ë¥¼ ì°¾ì•„ë³´ì„¸ìš”</h1>
    <button class="cta-button" onclick="window.location.href='/recommend'">ì§„ë¡œ ì¶”ì²œ ì‹œì‘í•˜ê¸°</button>
  </section>

  <div class="content-wrapper">
    {% if profile %}
      {% set job_map = {
        'INTJ': 'ì „ëµ ì»¨ì„¤í„´íŠ¸, ë°ì´í„° ì‚¬ì´ì–¸í‹°ìŠ¤íŠ¸, ê°œë°œì',
        'INTP': 'ì—°êµ¬ì›, ì‹œìŠ¤í…œ ì•„í‚¤í…íŠ¸, ì´ë¡  ê³¼í•™ì',
        'ENTJ': 'CEO, ê¸°íšì, ë³€í˜¸ì‚¬',
        'ENTP': 'ê¸°ìˆ  ì°½ì—…ê°€, ë§ˆì¼€íŒ… ì „ëµê°€, í”„ë¡œë•íŠ¸ ë§¤ë‹ˆì €',
        'INFJ': 'ì‹¬ë¦¬ìƒë‹´ê°€, ì‘ê°€, UX ë””ìì´ë„ˆ',
        'INFP': 'ì†Œì„¤ê°€, ì˜ˆìˆ ê°€, ë¹„ì˜ë¦¬ë‹¨ì²´ í™œë™ê°€',
        'ENFJ': 'êµì‚¬, HR ê´€ë¦¬ì, ì‚¬íšŒë³µì§€ì‚¬',
        'ENFP': 'ë¸Œëœë“œ ë§ˆì¼€í„°, ì½˜í…ì¸  í¬ë¦¬ì—ì´í„°, ì—¬í–‰ ì‘ê°€',
        'ISTJ': 'íšŒê³„ì‚¬, ë²•ë¥  ì „ë¬¸ê°€, í–‰ì • ê³µë¬´ì›',
        'ISFJ': 'ê°„í˜¸ì‚¬, ë„ì„œê´€ ì‚¬ì„œ, ì´ˆë“±êµì‚¬',
        'ESTJ': 'êµ° ê°„ë¶€, í”„ë¡œì íŠ¸ ë§¤ë‹ˆì €, ìš´ì˜ ê´€ë¦¬ì',
        'ESFJ': 'ì˜ë£Œ ìƒë‹´ì‚¬, ê³ ê° ì„œë¹„ìŠ¤ ê´€ë¦¬ì, ë³´ê±´ êµì‚¬',
        'ISTP': 'ê¸°ê³„ ì—”ì§€ë‹ˆì–´, ì •ë¹„ì‚¬, íŒŒì¼ëŸ¿',
        'ISFP': 'íŒ¨ì…˜ ë””ìì´ë„ˆ, ì‚¬ì§„ì‘ê°€, í”Œë¡œë¦¬ìŠ¤íŠ¸',
        'ESTP': 'ì˜ì—… ë§¤ë‹ˆì €, ì‘ê¸‰ êµ¬ì¡°ì‚¬, ìŠ¤í¬ì¸  ì½”ì¹˜',
        'ESFP': 'MC, ë°°ìš°, ì´ë²¤íŠ¸ í”Œë˜ë„ˆ'
      } %}
      <div class="info-card">
        <h3>ğŸŒŸ {{ profile.mbti }} ìœ í˜•ì€ ë‹¤ìŒê³¼ ê°™ì€ ì§ì—…ì— ë§ì´ ì¢…ì‚¬í•´ìš”</h3>
        <p>{{ job_map[profile.mbti] }}</p>
      </div>

      {% if job_detail %}
      <div class="info-card">
        <h3>ğŸ” {{ session.get("username") }} ë‹˜ì´ ê´€ì‹¬ ìˆëŠ” <strong>{{ profile.target_career }}</strong>ì˜ ì£¼ìš” ì •ë³´</h3>
        <div id="job-summary" data-summary="{{ job_detail.summary | replace('\n', ' ') }}"></div>
        {% if job_detail.salery %}
          <p class="salary">ğŸ’° í‰ê·  ì—°ë´‰: {{ job_detail.salery }}</p>
        {% else %}
          <p class="salary">ğŸ’° í‰ê·  ì—°ë´‰ ì •ë³´ ì—†ìŒ</p>
        {% endif %}
      </div>
      {% endif %}

    {% else %}
      <!-- ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ì‚¬ìš©ì ì „ìš© ì„¹ì…˜ -->
      <div class="info-card">
        <h3>ğŸ“ ì „êµ­ í•™êµ/í•™ê³¼ ì·¨ì—…ë¥  TOP 3</h3>
        <ul>
          {% for s in random_schools %}
            <li><strong>{{ s.school_name }} {{ s.dept_name }}</strong> â€“ ì·¨ì—…ë¥  {{ s.emp_rate_total }}%</li>
          {% endfor %}
        </ul>
      </div>

      <div class="info-card">
        <h3>ğŸ’¼ ì¸ê¸° ì§ì—… ë° ì—°ë´‰ ì •ë³´</h3>
        <ul>
          {% for j in random_jobs %}
            <li><strong>{{ j.job }}</strong> â€“ í‰ê·  ì—°ë´‰ {{ j.salery }}</li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}
  </div>

  <script>
    window.addEventListener('DOMContentLoaded', () => {
      const container = document.getElementById("job-summary");
      if (container) {
        let rawText = container.dataset.summary;
        rawText = rawText.replace(/[\â€“\-]\s*/g, '');
        const sentences = rawText
          .replace(/([.])\s+(?=[ê°€-í£])/g, "$1|")
          .split("|")
          .map(p => p.trim())
          .filter(p => p.length > 0);
        container.innerHTML = sentences.map(s => `<p>${s}</p>`).join('');
      }
    });
  </script>
</body>
</html>
